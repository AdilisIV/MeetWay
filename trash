function parseDataViaAPI(j,c) {
    //return function () {
    vk.api.groups.search({
            q: ABC[j],
            type: 'event',
            city_id: CitiesID[c],
            future: 1,
            offset: 0,
            count: 1000
        })
        .then((group) => {
            var result = [];
            console.log('Первое поиское слово: ', ABC[j]);
            var groupObj = JSON.stringify(group);
            var groupJSON = JSON.parse(groupObj);
            for (var i = 0; i < groupJSON.items.length; i++) {
                result.push(groupJSON.items[i].screen_name); // все id по словарю для заданного города
            }
            result = arrayUnique(result); // удаляем дублирующиеся данные
            result = result.join(',');

            return result;
        })
        .then(function (result) {
            return new Promise(function (resolve, reject) {
                vk.api.groups.getById({
                        group_ids: result,
                        fields: 'members_count,start_date,activity,place,description'
                    })
                    .then((data) => {
                        //console.log(data);

                        var id = [];
                        var name = [];
                        var activity = [];
                        var photo = [];
                        var start = [];
                        var members = [];
                        var latitude = [];
                        var longitude = [];
                        var description = [];
                        var screenname = [];

                        var gLatitude = 0;
                        var gLongitude = 0;
                        var gMembers = 0;
                        var gActivity = "Данные недоступны";
                        var gStartDate = 2001513200;
                        var gDescription = "Упс, видимо организаторы мероприятия решили не добавлять описание. :(";



                        var dataObj = JSON.stringify(data);
                        var dataJSON = JSON.parse(dataObj);


                        for (var i = 0; i < dataJSON.length; i++) {

                            var DoubleNameBool = false;

                            var place = dataJSON[i].place;
                            if (place) {
                                gLatitude = dataJSON[i].place.latitude;
                                gLongitude = dataJSON[i].place.longitude;
                            } else {
                                //console.info('Адрес проведения мероприятий не указан организаторами');
                            }

                            if(i < dataJSON.length-1) {
                                if (dataJSON[i].name == dataJSON[i+1].name) {
                                    DoubleNameBool = true;
                                }
                            }

                            if (dataJSON[i].is_closed == 0) {
                                gActivity = dataJSON[i].activity;
                                gMembers = dataJSON[i].members_count;
                                gStartDate = dataJSON[i].start_date;
                            } else {
                                //console.info('Частное сообщество');
                            }

                            if(dataJSON[i].description != "") {
                                gDescription = dataJSON[i].description;
                            } else {
                                //console.info('У сообщества нет описания', dataJSON[i].id);
                            }

                            if ((gMembers == 0) || (gMembers == 1) || (dataJSON[i].is_closed == 1) || DoubleNameBool) {
                                console.log("ID пустого сообщества: ", dataJSON[i].id);
                            } else {
                                id.push(dataJSON[i].id);
                                name.push(dataJSON[i].name);
                                activity.push(gActivity);
                                photo.push(dataJSON[i].photo_200);
                                start.push(gStartDate);
                                members.push(gMembers);
                                latitude.push(gLatitude);
                                longitude.push(gLongitude);
                                description.push(gDescription);
                                screenname.push("https://m.vk.com/club" + dataJSON[i].id);
                            }


                        }

                        for (var l=0; l<id.length; l++) {
                            request.post({
                                url: 'http://localhost:1337/events/'+CitiesID[c],
                                form: {
                                    id: id[l],
                                    name: name[l],
                                    activity: activity[l],
                                    photo: photo[l],
                                    start: start[l],
                                    members: members[l],
                                    latitude: latitude[l],
                                    longitude: longitude[l],
                                    description: description[l],
                                    screenname: screenname[l]
                                }
                            }, function (err, res, body) {
                                if (err) {
                                    console.log(err);
                                } else if (body) {
                                    //console.log(body);
                                }
                            });

                            if (l == id.length-1) {
                                resolve();
                            }
                        }

                    })
                    .then(() => {
                        console.log('Параметр "с" перед удалением дублей: ', c);
                        RemoveDoubleDocuments(c);
                    })
            })
        })
        .catch((error) => {
            console.error(error);
        })
    //}
}