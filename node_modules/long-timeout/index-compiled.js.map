{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["\nvar TIMEOUT_MAX = 2147483647; // 2^31-1\n\nexports.setTimeout = function(listener, after) {\n  return new Timeout(listener, after)\n}\nexports.setInterval = function(listener, after) {\n  return new Interval(listener, after)\n}\nexports.clearTimeout = function(timer) {\n  if (timer) timer.close()\n}\nexports.clearInterval = exports.clearTimeout\n\nexports.Timeout = Timeout\nexports.Interval = Interval\n\nfunction Timeout(listener, after) {\n  this.listener = listener\n  this.after = after\n  this.unreffed = false\n  this.start()\n}\n\nTimeout.prototype.unref = function() {\n  if (!this.unreffed) {\n    this.unreffed = true\n    this.timeout.unref()\n  }\n}\n\nTimeout.prototype.ref = function() {\n  if (this.unreffed) {\n    this.unreffed = false\n    this.timeout.ref()\n  }\n}\n\nTimeout.prototype.start = function() {\n  if (this.after <= TIMEOUT_MAX) {\n    this.timeout = setTimeout(this.listener, this.after)\n  } else {\n    var self = this\n    this.timeout = setTimeout(function() {\n      self.after -= TIMEOUT_MAX\n      self.start()\n    }, TIMEOUT_MAX)\n  }\n  if (this.unreffed) {\n    this.timeout.unref()\n  }\n}\n\nTimeout.prototype.close = function() {\n  clearTimeout(this.timeout)\n}\n\nfunction Interval(listener, after) {\n  this.listener = listener\n  this.after = this.timeLeft = after\n  this.unreffed = false\n  this.start()\n}\n\nInterval.prototype.unref = function() {\n  if (!this.unreffed) {\n    this.unreffed = true\n    this.timeout.unref()\n  }\n}\n\nInterval.prototype.ref = function() {\n  if (this.unreffed) {\n    this.unreffed = false\n    this.timeout.ref()\n  }\n}\n\nInterval.prototype.start = function() {\n  var self = this\n\n  if (this.timeLeft <= TIMEOUT_MAX) {\n    this.timeout = setTimeout(function() {\n      self.listener()\n      self.timeLeft = self.after\n      self.start()\n    }, this.timeLeft)\n  } else {\n    this.timeout = setTimeout(function() {\n      self.timeLeft -= TIMEOUT_MAX\n      self.start()\n    }, TIMEOUT_MAX)\n  }\n  if (this.unreffed) {\n    this.timeout.unref()\n  }\n}\n\nInterval.prototype.close = function() {\n  Timeout.prototype.close.apply(this, arguments)\n}\n"]}