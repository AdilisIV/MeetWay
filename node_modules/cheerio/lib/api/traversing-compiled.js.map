{"version":3,"sources":["traversing.js"],"names":[],"mappings":"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","file":"traversing-compiled.js","sourcesContent":["var select = require('css-select'),\n    utils = require('../utils'),\n    domEach = utils.domEach,\n    uniqueSort = require('htmlparser2').DomUtils.uniqueSort,\n    isTag = utils.isTag,\n    _ = {\n      bind: require('lodash.bind'),\n      forEach: require('lodash.foreach'),\n      reject: require('lodash.reject'),\n      filter: require('lodash.filter'),\n      reduce: require('lodash.reduce')\n    };\n\nexports.find = function(selectorOrHaystack) {\n  var elems = _.reduce(this, function(memo, elem) {\n    return memo.concat(_.filter(elem.children, isTag));\n  }, []);\n  var contains = this.constructor.contains;\n  var haystack;\n\n  if (selectorOrHaystack && typeof selectorOrHaystack !== 'string') {\n    if (selectorOrHaystack.cheerio) {\n      haystack = selectorOrHaystack.get();\n    } else {\n      haystack = [selectorOrHaystack];\n    }\n\n    return this._make(haystack.filter(function(elem) {\n      var idx, len;\n      for (idx = 0, len = this.length; idx < len; ++idx) {\n        if (contains(this[idx], elem)) {\n          return true;\n        }\n      }\n    }, this));\n  }\n\n  var options = {__proto__: this.options, context: this.toArray()};\n\n  return this._make(select(selectorOrHaystack, elems, options));\n};\n\n// Get the parent of each element in the current set of matched elements,\n// optionally filtered by a selector.\nexports.parent = function(selector) {\n  var set = [];\n\n  domEach(this, function(idx, elem) {\n    var parentElem = elem.parent;\n    if (parentElem && set.indexOf(parentElem) < 0) {\n      set.push(parentElem);\n    }\n  });\n\n  if (arguments.length) {\n    set = exports.filter.call(set, selector, this);\n  }\n\n  return this._make(set);\n};\n\nexports.parents = function(selector) {\n  var parentNodes = [];\n\n  // When multiple DOM elements are in the original set, the resulting set will\n  // be in *reverse* order of the original elements as well, with duplicates\n  // removed.\n  this.get().reverse().forEach(function(elem) {\n    traverseParents(this, elem.parent, selector, Infinity)\n      .forEach(function(node) {\n        if (parentNodes.indexOf(node) === -1) {\n          parentNodes.push(node);\n        }\n      }\n    );\n  }, this);\n\n  return this._make(parentNodes);\n};\n\nexports.parentsUntil = function(selector, filter) {\n  var parentNodes = [], untilNode, untilNodes;\n\n  if (typeof selector === 'string') {\n    untilNode = select(selector, this.parents().toArray(), this.options)[0];\n  } else if (selector && selector.cheerio) {\n    untilNodes = selector.toArray();\n  } else if (selector) {\n    untilNode = selector;\n  }\n\n  // When multiple DOM elements are in the original set, the resulting set will\n  // be in *reverse* order of the original elements as well, with duplicates\n  // removed.\n\n  this.toArray().reverse().forEach(function(elem) {\n    while ((elem = elem.parent)) {\n      if ((untilNode && elem !== untilNode) ||\n        (untilNodes && untilNodes.indexOf(elem) === -1) ||\n        (!untilNode && !untilNodes)) {\n        if (isTag(elem) && parentNodes.indexOf(elem) === -1) { parentNodes.push(elem); }\n      } else {\n        break;\n      }\n    }\n  }, this);\n\n  return this._make(filter ? select(filter, parentNodes, this.options) : parentNodes);\n};\n\n// For each element in the set, get the first element that matches the selector\n// by testing the element itself and traversing up through its ancestors in the\n// DOM tree.\nexports.closest = function(selector) {\n  var set = [];\n\n  if (!selector) {\n    return this._make(set);\n  }\n\n  domEach(this, function(idx, elem) {\n    var closestElem = traverseParents(this, elem, selector, 1)[0];\n\n    // Do not add duplicate elements to the set\n    if (closestElem && set.indexOf(closestElem) < 0) {\n      set.push(closestElem);\n    }\n  }.bind(this));\n\n  return this._make(set);\n};\n\nexports.next = function(selector) {\n  if (!this[0]) { return this; }\n  var elems = [];\n\n  _.forEach(this, function(elem) {\n    while ((elem = elem.next)) {\n      if (isTag(elem)) {\n        elems.push(elem);\n        return;\n      }\n    }\n  });\n\n  return selector ?\n    exports.filter.call(elems, selector, this) :\n    this._make(elems);\n};\n\nexports.nextAll = function(selector) {\n  if (!this[0]) { return this; }\n  var elems = [];\n\n  _.forEach(this, function(elem) {\n    while ((elem = elem.next)) {\n      if (isTag(elem) && elems.indexOf(elem) === -1) {\n        elems.push(elem);\n      }\n    }\n  });\n\n  return selector ?\n    exports.filter.call(elems, selector, this) :\n    this._make(elems);\n};\n\nexports.nextUntil = function(selector, filterSelector) {\n  if (!this[0]) { return this; }\n  var elems = [], untilNode, untilNodes;\n\n  if (typeof selector === 'string') {\n    untilNode = select(selector, this.nextAll().get(), this.options)[0];\n  } else if (selector && selector.cheerio) {\n    untilNodes = selector.get();\n  } else if (selector) {\n    untilNode = selector;\n  }\n\n  _.forEach(this, function(elem) {\n    while ((elem = elem.next)) {\n      if ((untilNode && elem !== untilNode) ||\n        (untilNodes && untilNodes.indexOf(elem) === -1) ||\n        (!untilNode && !untilNodes)) {\n        if (isTag(elem) && elems.indexOf(elem) === -1) {\n          elems.push(elem);\n        }\n      } else {\n        break;\n      }\n    }\n  });\n\n  return filterSelector ?\n    exports.filter.call(elems, filterSelector, this) :\n    this._make(elems);\n};\n\nexports.prev = function(selector) {\n  if (!this[0]) { return this; }\n  var elems = [];\n\n  _.forEach(this, function(elem) {\n    while ((elem = elem.prev)) {\n      if (isTag(elem)) {\n        elems.push(elem);\n        return;\n      }\n    }\n  });\n\n  return selector ?\n    exports.filter.call(elems, selector, this) :\n    this._make(elems);\n};\n\nexports.prevAll = function(selector) {\n  if (!this[0]) { return this; }\n  var elems = [];\n\n  _.forEach(this, function(elem) {\n    while ((elem = elem.prev)) {\n      if (isTag(elem) && elems.indexOf(elem) === -1) {\n        elems.push(elem);\n      }\n    }\n  });\n\n  return selector ?\n    exports.filter.call(elems, selector, this) :\n    this._make(elems);\n};\n\nexports.prevUntil = function(selector, filterSelector) {\n  if (!this[0]) { return this; }\n  var elems = [], untilNode, untilNodes;\n\n  if (typeof selector === 'string') {\n    untilNode = select(selector, this.prevAll().get(), this.options)[0];\n  } else if (selector && selector.cheerio) {\n    untilNodes = selector.get();\n  } else if (selector) {\n    untilNode = selector;\n  }\n\n  _.forEach(this, function(elem) {\n    while ((elem = elem.prev)) {\n      if ((untilNode && elem !== untilNode) ||\n        (untilNodes && untilNodes.indexOf(elem) === -1) ||\n        (!untilNode && !untilNodes)) {\n        if (isTag(elem) && elems.indexOf(elem) === -1) {\n          elems.push(elem);\n        }\n      } else {\n        break;\n      }\n    }\n  });\n\n  return filterSelector ?\n    exports.filter.call(elems, filterSelector, this) :\n    this._make(elems);\n};\n\nexports.siblings = function(selector) {\n  var parent = this.parent();\n\n  var elems = _.filter(\n    parent ? parent.children() : this.siblingsAndMe(),\n    _.bind(function(elem) { return isTag(elem) && !this.is(elem); }, this)\n  );\n\n  if (selector !== undefined) {\n    return exports.filter.call(elems, selector, this);\n  } else {\n    return this._make(elems);\n  }\n};\n\nexports.children = function(selector) {\n\n  var elems = _.reduce(this, function(memo, elem) {\n    return memo.concat(_.filter(elem.children, isTag));\n  }, []);\n\n  if (selector === undefined) return this._make(elems);\n\n  return exports.filter.call(elems, selector, this);\n};\n\nexports.contents = function() {\n  return this._make(_.reduce(this, function(all, elem) {\n    all.push.apply(all, elem.children);\n    return all;\n  }, []));\n};\n\nexports.each = function(fn) {\n  var i = 0, len = this.length;\n  while (i < len && fn.call(this[i], i, this[i]) !== false) ++i;\n  return this;\n};\n\nexports.map = function(fn) {\n  return this._make(_.reduce(this, function(memo, el, i) {\n    var val = fn.call(el, i, el);\n    return val == null ? memo : memo.concat(val);\n  }, []));\n};\n\nvar makeFilterMethod = function(filterFn) {\n  return function(match, container) {\n    var testFn;\n    container = container || this;\n\n    if (typeof match === 'string') {\n      testFn = select.compile(match, container.options);\n    } else if (typeof match === 'function') {\n      testFn = function(el, i) {\n        return match.call(el, i, el);\n      };\n    } else if (match.cheerio) {\n      testFn = match.is.bind(match);\n    } else {\n      testFn = function(el) {\n        return match === el;\n      };\n    }\n\n    return container._make(filterFn(this, testFn));\n  };\n};\n\nexports.filter = makeFilterMethod(_.filter);\nexports.not = makeFilterMethod(_.reject);\n\nexports.has = function(selectorOrHaystack) {\n  var that = this;\n  return exports.filter.call(this, function() {\n    return that._make(this).find(selectorOrHaystack).length > 0;\n  });\n};\n\nexports.first = function() {\n  return this.length > 1 ? this._make(this[0]) : this;\n};\n\nexports.last = function() {\n  return this.length > 1 ? this._make(this[this.length - 1]) : this;\n};\n\n// Reduce the set of matched elements to the one at the specified index.\nexports.eq = function(i) {\n  i = +i;\n\n  // Use the first identity optimization if possible\n  if (i === 0 && this.length <= 1) return this;\n\n  if (i < 0) i = this.length + i;\n  return this[i] ? this._make(this[i]) : this._make([]);\n};\n\n// Retrieve the DOM elements matched by the jQuery object.\nexports.get = function(i) {\n  if (i == null) {\n    return Array.prototype.slice.call(this);\n  } else {\n    return this[i < 0 ? (this.length + i) : i];\n  }\n};\n\n// Search for a given element from among the matched elements.\nexports.index = function(selectorOrNeedle) {\n  var $haystack, needle;\n\n  if (arguments.length === 0) {\n    $haystack = this.parent().children();\n    needle = this[0];\n  } else if (typeof selectorOrNeedle === 'string') {\n    $haystack = this._make(selectorOrNeedle);\n    needle = this[0];\n  } else {\n    $haystack = this;\n    needle = selectorOrNeedle.cheerio ? selectorOrNeedle[0] : selectorOrNeedle;\n  }\n\n  return $haystack.get().indexOf(needle);\n};\n\nexports.slice = function() {\n  return this._make([].slice.apply(this, arguments));\n};\n\nfunction traverseParents(self, elem, selector, limit) {\n  var elems = [];\n  while (elem && elems.length < limit) {\n    if (!selector || exports.filter.call([elem], selector, self).length) {\n      elems.push(elem);\n    }\n    elem = elem.parent;\n  }\n  return elems;\n}\n\n// End the most recent filtering operation in the current chain and return the\n// set of matched elements to its previous state.\nexports.end = function() {\n  return this.prevObject || this._make([]);\n};\n\nexports.add = function(other, context) {\n  var selection = this._make(other, context);\n  var contents = uniqueSort(selection.get().concat(this.get()));\n\n  for (var i = 0; i < contents.length; ++i) {\n    selection[i] = contents[i];\n  }\n  selection.length = contents.length;\n\n  return selection;\n};\n\n// Add the previous set of elements on the stack to the current set, optionally\n// filtered by a selector.\nexports.addBack = function(selector) {\n  return this.add(\n    arguments.length ? this.prevObject.filter(selector) : this.prevObject\n  );\n};\n"]}