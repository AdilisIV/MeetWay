{"version":3,"sources":["css.js"],"names":[],"mappings":"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","file":"css-compiled.js","sourcesContent":["var domEach = require('../utils').domEach,\n    _ = {\n      pick: require('lodash.pick'),\n    };\n\nvar toString = Object.prototype.toString;\n\n/**\n * Set / Get css.\n *\n * @param {String|Object} prop\n * @param {String} val\n * @return {self}\n * @api public\n */\n\nexports.css = function(prop, val) {\n  if (arguments.length === 2 ||\n    // When `prop` is a \"plain\" object\n    (toString.call(prop) === '[object Object]')) {\n    return domEach(this, function(idx, el) {\n      setCss(el, prop, val, idx);\n    });\n  } else {\n    return getCss(this[0], prop);\n  }\n};\n\n/**\n * Set styles of all elements.\n *\n * @param {String|Object} prop\n * @param {String} val\n * @param {Number} idx - optional index within the selection\n * @return {self}\n * @api private\n */\n\nfunction setCss(el, prop, val, idx) {\n  if ('string' == typeof prop) {\n    var styles = getCss(el);\n    if (typeof val === 'function') {\n      val = val.call(el, idx, styles[prop]);\n    }\n\n    if (val === '') {\n      delete styles[prop];\n    } else if (val != null) {\n      styles[prop] = val;\n    }\n\n    el.attribs.style = stringify(styles);\n  } else if ('object' == typeof prop) {\n    Object.keys(prop).forEach(function(k){\n      setCss(el, k, prop[k]);\n    });\n  }\n}\n\n/**\n * Get parsed styles of the first element.\n *\n * @param {String} prop\n * @return {Object}\n * @api private\n */\n\nfunction getCss(el, prop) {\n  var styles = parse(el.attribs.style);\n  if (typeof prop === 'string') {\n    return styles[prop];\n  } else if (Array.isArray(prop)) {\n    return _.pick(styles, prop);\n  } else {\n    return styles;\n  }\n}\n\n/**\n * Stringify `obj` to styles.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction stringify(obj) {\n  return Object.keys(obj || {})\n    .reduce(function(str, prop){\n      return str += ''\n        + (str ? ' ' : '')\n        + prop\n        + ': '\n        + obj[prop]\n        + ';';\n    }, '');\n}\n\n/**\n * Parse `styles`.\n *\n * @param {String} styles\n * @return {Object}\n * @api private\n */\n\nfunction parse(styles) {\n  styles = (styles || '').trim();\n\n  if (!styles) return {};\n\n  return styles\n    .split(';')\n    .reduce(function(obj, str){\n      var n = str.indexOf(':');\n      // skip if there is no :, or if it is the first/last character\n      if (n < 1 || n === str.length-1) return obj;\n      obj[str.slice(0,n).trim()] = str.slice(n+1).trim();\n      return obj;\n    }, {});\n}\n"]}