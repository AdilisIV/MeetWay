{"version":3,"sources":["stack.js"],"names":[],"mappings":"AAAA;;;;AAIA,IAAI,UAAU,QAAQ,WAAR,CAAd;;AAEA;;;;AAIA,OAAO,OAAP,GAAiB,KAAjB;;AAEA;;;;;;;;AAQA,SAAS,KAAT,CAAgB,KAAhB,EAAuB,OAAvB,EAAgC,IAAhC,EAAsC,IAAtC,EAA4C;AAC1C,UAAQ,MAAM,GAAN,CAAU,OAAV,CAAR;;AAEA;AACA,WAAS,IAAT,CAAe,GAAf,EAAoB;AAClB,QAAI,GAAJ,EAAS,OAAO,MAAM,GAAN,CAAP;AACT,QAAI,KAAK,MAAM,KAAN,EAAT;AACA,WAAO,MAAM,GAAG,SAAH,KAAiB,IAA9B,EAAoC,KAAK,MAAM,KAAN,EAAL;AACpC,QAAI,CAAC,EAAL,EAAS,OAAO,KAAK,IAAL,CAAU,OAAV,EAAmB,IAAnB,EAAyB,IAAzB,CAAP;AACT,OAAG,IAAH,CAAQ,OAAR,EAAiB,IAAjB,EAAuB,IAAvB;AACD;;AAED;AACA,WAAS,KAAT,CAAgB,GAAhB,EAAqB;AACnB,QAAI,KAAK,MAAM,KAAN,EAAT;AACA,WAAO,MAAM,GAAG,SAAH,KAAiB,IAA9B,EAAoC,KAAK,MAAM,KAAN,EAAL;AACpC,QAAI,EAAJ,EAAQ,OAAO,GAAG,IAAH,CAAQ,OAAR,EAAiB,GAAjB,EAAsB,IAAtB,EAA4B,IAA5B,CAAP,CAAR,KACK,OAAO,KAAK,IAAL,CAAU,OAAV,EAAmB,GAAnB,CAAP;AACN;;AAED;AACA;AACD","file":"stack-compiled.js","sourcesContent":["/**\n * Module Dependencies\n */\n\nvar compile = require('./compile')\n\n/**\n * Export `Stack`\n */\n\nmodule.exports = Stack\n\n/**\n * Initialize `Stack`\n *\n * @param {Array} series array of functions\n * @param {Array} args\n * @param {Function} done\n */\n\nfunction Stack (stack, context, args, done) {\n  stack = stack.map(compile)\n\n  // run in stack\n  function next (err) {\n    if (err) return error(err)\n    var fn = stack.shift()\n    while (fn && fn.__catch__ === true) fn = stack.shift()\n    if (!fn) return done.call(context, null, args)\n    fn.call(context, args, next)\n  }\n\n  // error handling\n  function error (err) {\n    var fn = stack.shift()\n    while (fn && fn.__catch__ !== true) fn = stack.shift()\n    if (fn) return fn.call(context, err, args, next)\n    else return done.call(context, err)\n  }\n\n  // kick us off\n  next()\n}\n"]}