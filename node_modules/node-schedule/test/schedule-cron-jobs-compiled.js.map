{"version":3,"sources":["schedule-cron-jobs.js"],"names":[],"mappings":"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","file":"schedule-cron-jobs-compiled.js","sourcesContent":["\n'use strict';\n\nvar sinon = require('sinon');\nvar main = require('../package.json').main;\nvar schedule = require('../' + main);\n\nvar clock;\n\nmodule.exports = {\n  \".scheduleJob(cron_expr, fn)\": {\n    setUp: function(cb) {\n      var now = Date.now();\n      clock = sinon.useFakeTimers();\n      clock.tick(now);\n      cb();\n    },\n    \"Runs job every second\": function(test) {\n      test.expect(3);\n\n      var timeout = 3 * 1000 + 150;\n\n      var job = schedule.scheduleJob('* * * * * *', function() {\n        test.ok(true);\n      });\n\n      setTimeout(function() {\n        job.cancel();\n        test.done();\n      }, timeout);\n\n      clock.tick(timeout);\n    },\n    \"Runs job every minute\": function(test) {\n      test.expect(3);\n\n      var timeout = 3 * 60 * 1000;\n\n      var job = schedule.scheduleJob('0 * * * * *', function() {\n        test.ok(true);\n      });\n\n      setTimeout(function() {\n        job.cancel();\n        test.done();\n      }, timeout);\n\n      clock.tick(timeout);\n    },\n    \"Runs job every hour\": function(test) {\n      test.expect(3);\n\n      var timeout = 3 * 60 * 60 * 1000;\n\n      var job = schedule.scheduleJob('0 0 * * * *', function() {\n        test.ok(true);\n      });\n\n      setTimeout(function() {\n        job.cancel();\n        test.done();\n      }, timeout);\n\n      clock.tick(timeout);\n    },\n    \"Runs job every day\": function(test) {\n      test.expect(3);\n\n      var timeout = 3 * 24 * 60 * 60 * 1000;\n\n      var job = schedule.scheduleJob('0 0 0 * * *', function() {\n        test.ok(true);\n      });\n\n      setTimeout(function() {\n        job.cancel();\n        test.done();\n      }, timeout);\n\n      clock.tick(timeout);\n    },\n    \"Runs job every week\": function(test) {\n      test.expect(3);\n\n      var timeout = 3 * 7 * 24 * 60 * 60 * 1000;\n\n      var job = schedule.scheduleJob('0 0 0 * * 1', function() {\n        test.ok(true);\n      });\n\n      setTimeout(function() {\n        job.cancel();\n        test.done();\n      }, timeout);\n\n      clock.tick(timeout);\n    },\n    \"Runs job every month\": function(test) {\n      test.expect(48);\n\n      var timeout = 4 * 365.25 * 24 * 60 * 60 * 1000;\n\n      var job = schedule.scheduleJob('0 0 0 1 * *', function() {\n        test.ok(true);\n      });\n\n      setTimeout(function() {\n        job.cancel();\n        test.done();\n      }, timeout);\n\n      clock.tick(timeout);\n\n    },\n    \"Runs job every year\": function(test) {\n      test.expect(4);\n\n      var timeout = 4 * 365.25 * 24 * 60 * 60 * 1000;\n\n      var job = schedule.scheduleJob('0 0 0 1 1 *', function() {\n        test.ok(true);\n      });\n\n      setTimeout(function() {\n        job.cancel();\n        test.done();\n      }, timeout);\n\n      clock.tick(timeout);\n    },\n    tearDown: function(cb) {\n      clock.restore();\n      cb();\n    }\n  }\n};\n"]}